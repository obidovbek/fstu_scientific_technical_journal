<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE schema SYSTEM "../../../lib/pkp/dtd/xmlSchema.dtd">

<!--
  * dbscripts/xml/guest_submissions_schema.xml
  *
  * Database schema for guest submissions management
  -->

<schema version="0.1">
	<!--
	  *
	  * TABLE guest_submissions
	  *
	  -->
	<table name="guest_submissions">
		<field name="submission_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="context_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="manuscript_title" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="article_type" type="C2" size="100">
			<NOTNULL/>
		</field>
		<field name="abstract" type="X"/>
		<field name="keywords" type="C2" size="500"/>
		<field name="manuscript_file_path" type="C2" size="500"/>
		<field name="manuscript_file_name" type="C2" size="255"/>
		<field name="status" type="C2" size="50">
			<NOTNULL/>
			<DEFAULT VALUE="pending"/>
		</field>
		<field name="assigned_editor_id" type="I8"/>
		<field name="decision" type="C2" size="50"/>
		<field name="decision_notes" type="X"/>
		<field name="admin_notes" type="X"/>
		<field name="date_submitted" type="T">
			<NOTNULL/>
		</field>
		<field name="date_assigned" type="T"/>
		<field name="date_decided" type="T"/>
		<descr>Guest manuscript submissions</descr>
		<index name="guest_submissions_context_id">
			<col>context_id</col>
		</index>
		<index name="guest_submissions_status">
			<col>status</col>
		</index>
		<index name="guest_submissions_assigned_editor">
			<col>assigned_editor_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE guest_submission_authors
	  *
	  -->
	<table name="guest_submission_authors">
		<field name="author_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="submission_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="title" type="C2" size="50"/>
		<field name="first_name" type="C2" size="100">
			<NOTNULL/>
		</field>
		<field name="last_name" type="C2" size="100">
			<NOTNULL/>
		</field>
		<field name="authorship" type="C2" size="100"/>
		<field name="email" type="C2" size="255">
			<NOTNULL/>
		</field>
		<field name="address" type="C2" size="500"/>
		<field name="affiliation" type="C2" size="500"/>
		<field name="seq" type="I4">
			<NOTNULL/>
			<DEFAULT VALUE="0"/>
		</field>
		<descr>Authors of guest submissions</descr>
		<index name="guest_submission_authors_submission_id">
			<col>submission_id</col>
		</index>
	</table>

	<!--
	  *
	  * TABLE guest_submission_log
	  *
	  -->
	<table name="guest_submission_log">
		<field name="log_id" type="I8">
			<KEY />
			<AUTOINCREMENT/>
		</field>
		<field name="submission_id" type="I8">
			<NOTNULL/>
		</field>
		<field name="user_id" type="I8"/>
		<field name="action" type="C2" size="100">
			<NOTNULL/>
		</field>
		<field name="message" type="X"/>
		<field name="date_logged" type="T">
			<NOTNULL/>
		</field>
		<descr>Activity log for guest submissions</descr>
		<index name="guest_submission_log_submission_id">
			<col>submission_id</col>
		</index>
	</table>
</schema>

